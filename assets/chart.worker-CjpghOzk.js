(function(){"use strict";var L={},Z;function vr(){if(Z)return L;Z=1,Object.defineProperty(L,"__esModule",{value:!0});function A(r){if(Array.isArray(r))return r}function S(r,a){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(r)))){var t=[],e=!0,n=!1,f=void 0;try{for(var v=r[Symbol.iterator](),o;!(e=(o=v.next()).done)&&(t.push(o.value),!(a&&t.length===a));e=!0);}catch(l){n=!0,f=l}finally{try{!e&&v.return!=null&&v.return()}finally{if(n)throw f}}return t}}function m(r,a){(a==null||a>r.length)&&(a=r.length);for(var t=0,e=new Array(a);t<a;t++)e[t]=r[t];return e}function D(r,a){if(r){if(typeof r=="string")return m(r,a);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(r,a)}}function B(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M(r,a){return A(r)||S(r,a)||D(r,a)||B()}var I={"PointValueExtractor<unknown>":r=>typeof r=="function",XYDataPoint:r=>r!=null&&I.X(r.x)&&typeof r.y=="number",X:r=>typeof r=="number"||r instanceof Date};function E(r,a,t){return Math.abs((r[0]-t[0])*(a[1]-r[1])-(r[0]-a[0])*(t[1]-r[1]))/2}function N(){for(var r=arguments.length,a=new Array(r),t=0;t<r;t++)a[t]=arguments[t];var e=a.length;if(e){for(var n=0,f=0,v=0;v<e;v++)n+=a[v][0],f+=a[v][1];return[n/e,f/e]}}function R(r,a){if(r.length===2)return[[r[0]],[r[1]]];for(var t=r[0],e=r.slice(1,r.length-1),n=r[r.length-1],f=e.length/(a-2),v=[[t]],o=0;o<a-2;o++){var l=Math.floor(o*f),u=Math.floor((o+1)*f),c=e.slice(l,u);v.push(c)}return v.push([n]),v}var i=r=>{for(var a=0,t=0;t<r.length;t+=1)a+=r[t];return a/r.length},X=r=>{for(var a=i(r),t=0,e=0;e<r.length;e+=1)t+=(r[e]-a)*(r[e]-a);return Math.sqrt(t/r.length)},P=(r,a)=>{for(var t=r.length,e=new Array(t),n=0;n<t;n++)e[n]=a(r[n],n);return e},d=r=>I["PointValueExtractor<unknown>"](r)?r:a=>a[r],O=(r,a)=>{var t=d(r),e=d(a);return n=>P(n,(f,v)=>[t(f,v),e(f,v)])},q=(r,a)=>({x:r,y:a}),w=()=>({x:r=>{var a=I.XYDataPoint(r)?r.x:r[0];return a instanceof Date?a.getTime():a},y:r=>"y"in r?r.y:r[1],toPoint:q}),F=(r,a)=>new r.constructor(a),U=function(a,t){for(var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=[],f=0,v=0;v<t;v++)f+=a[v];for(var o=t;o<=a.length;o++)(o-t)%e===0&&n.push(f/t),f+=a[o]-a[o-t];return n},$=r=>{var a=d(r.x),t=d(r.y),e=r.toPoint;return function(n,f){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(n.length===0)return n;for(var o=P(n,t),l=P(n,a),u=F(n,0),c=0,s,h=0;h<f;h++)c+=o[h];for(var T=f;T<=o.length;T++)(T-f)%v===0&&(s=e((l[T-f]+l[T-1])/2,c/f,T-f),u[u.length]=s),c+=o[T]-o[T-f];return u}},Y=$(w());function k(r,a){if(r.length!=a.length)throw"Mismatched lengths";var t=r.length;t!=0&&((t&t-1)==0?ur(r,a):hr(r,a))}function z(r,a){k(a,r)}function ur(r,a){if(r.length!=a.length)throw"Mismatched lengths";var t=r.length;if(t!=1){for(var e=-1,n=0;n<32;n++)1<<n==t&&(e=n);if(e==-1)throw"Length is not a power of 2";for(var f=new Array(t/2),v=new Array(t/2),o=0;o<t/2;o++)f[o]=Math.cos(2*Math.PI*o/t),v[o]=Math.sin(2*Math.PI*o/t);for(var l=0;l<t;l++){var u=cr(l,e);if(u>l){var c=r[l];r[l]=r[u],r[u]=c,c=a[l],a[l]=a[u],a[u]=c}}for(var s=2;s<=t;s*=2)for(var h=s/2,T=t/s,g=0;g<t;g+=s)for(var p=g,b=0;p<g+h;p++,b+=T){var G=r[p+h]*f[b]+a[p+h]*v[b],y=-r[p+h]*v[b]+a[p+h]*f[b];r[p+h]=r[p]-G,a[p+h]=a[p]-y,r[p]+=G,a[p]+=y}}}function cr(r,a){for(var t=0,e=0;e<a;e++)t=t<<1|r&1,r>>>=1;return t}function hr(r,a){if(r.length!=a.length)throw"Mismatched lengths";for(var t=r.length,e=1;e<t*2+1;)e*=2;for(var n=new Array(t),f=new Array(t),v=0;v<t;v++){var o=v*v%(t*2);n[v]=Math.cos(Math.PI*o/t),f[v]=Math.sin(Math.PI*o/t)}for(var l=new Array(e),u=new Array(e),c=0;c<t;c++)l[c]=r[c]*n[c]+a[c]*f[c],u[c]=-r[c]*f[c]+a[c]*n[c];for(var s=t;s<e;s++)l[s]=u[s]=0;var h=new Array(e),T=new Array(e);h[0]=n[0],T[0]=f[0];for(var g=1;g<t;g++)h[g]=h[e-g]=n[g],T[g]=T[e-g]=f[g];for(var p=t;p<=e-t;p++)h[p]=T[p]=0;var b=new Array(e),G=new Array(e);sr(l,u,h,T,b,G);for(var y=0;y<t;y++)r[y]=b[y]*n[y]+G[y]*f[y],a[y]=-b[y]*f[y]+G[y]*n[y]}function sr(r,a,t,e,n,f){if(r.length!=a.length||r.length!=t.length||t.length!=e.length||r.length!=n.length||n.length!=f.length)throw"Mismatched lengths";var v=r.length;r=r.slice(),a=a.slice(),t=t.slice(),e=e.slice(),k(r,a),k(t,e);for(var o=0;o<v;o++){var l=r[o]*t[o]-a[o]*e[o];a[o]=a[o]*t[o]+r[o]*e[o],r[o]=l}z(r,a);for(var u=0;u<v;u++)n[u]=r[u]/v,f[u]=a[u]/v}var gr=r=>{var a=r.length-1;if(a<1)return[];for(var t=new Array(a),e=0;e<a;e++)t[e]=r[e+1]-r[e];return t},H=r=>X(gr(r)),V=r=>{for(var a=r.length,t=i(r),e=0,n=0,f,v,o=0;o<a;o++)f=r[o]-t,v=f*f,e+=v*v,n+=v;return a*e/(n*n)},Tr=(r,a,t,e,n,f)=>{for(;r<=a;){var v=Math.round((r+a)/2),o=U(t,v,1),l=V(o);if(l>=n){var u=H(o);u<e&&(f=v,e=u),r=v+1}else a=v-1}return f},pr=function(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.2,e=a.length;if(e<=1)return[[],0];var n=0,f=[];if(a.length>1)for(var v=a[1]>a[0],o=1,l=2;l<a.length;l+=1)!v&&a[l]>a[l-1]?(o=l,v=!v):v&&a[l]>a[o]?o=l:v&&a[l]<a[l-1]&&(o>1&&a[o]>t&&(f.push(o),a[o]>n&&(n=a[o])),v=!v);if(f.length<=1)for(var u=2;u<e;u+=1)f.push(u);return[f,n]},Mr=(r,a)=>{for(var t=r.length,e=i(r),n=Math.pow(2,Math.trunc(Math.log2(t))+1),f=new Array(n).fill(0),v=new Array(n).fill(0),o=0;o<t;o+=1)f[o]=r[o]-e;k(f,v);for(var l=0;l<f.length;l+=1)f[l]=Math.pow(f[l],2)+Math.pow(v[l],2),v[l]=0;z(f,v);for(var u=[],c=1;c<a;c++)u[c]=f[c]/f[0];var s=pr(u),h=M(s,2),T=h[0],g=h[1];return{correlations:u,peaks:T,maxCorrelation:g}},W=r=>{var a=d(r.y),t=$(r);return function e(n,f){if(n.length===0)return n;if(f<=0)throw new Error("Supplied non-positive resolution parameter to ASAP: ".concat(f));if(n.length>=2*f){var v=Math.trunc(n.length/f);return e(t(n,v,v),f)}for(var o=P(n,a),l=Mr(o,Math.round(o.length/10)),u=l.correlations,c=l.peaks,s=l.maxCorrelation,h=V(o),T=H(o),g=1,p=1,b=-1,G=o.length/10,y=c.length-1;y>=0;y-=1){var C=c[y];if(C<p||C===1)break;if(Math.sqrt(1-u[C])*g>Math.sqrt(1-u[g])*C)continue;var er=U(o,C,1),Er=V(er),nr=H(er);Er>=h&&(nr<T&&(T=nr,g=C),p=Math.round(Math.max(C*Math.sqrt((s-1)/(u[C]-1)),p)),b<0&&(b=y))}return b>0&&(b<c.length-2&&(G=c[b+1]),p=Math.max(p,c[b]+1)),g=Tr(p,G,o,T,h,g),t(n,g,1)}},j=W(w());function _(r){for(var a=r.length,t=[0],e=1,n=r[0][0],f=1;f<a-1;f++){var v=r[f],o=r[f+1],l=N(...o);if(l!==void 0){for(var u=-1,c=-1,s=0;s<v.length;s++){var h=v[s],T=E(n,h,l);T>u&&(u=T,c=s)}n=v[c],t.push(e+c),e+=v.length}}return t.push(e),t}var J=r=>{var a=O(r.x,r.y);return(t,e)=>{if(e<0)throw new Error("Supplied negative desiredLength parameter to LTTB: ".concat(e));var n=t.length;if(n<=1||n<=e)return t;for(var f=a(t),v=R(f,e),o=_(v),l=F(t,o.length),u=0;u<o.length;u++)l[u]=t[o[u]];return l}},rr=J(w()),Ar=(r,a)=>{var t=r[a],e=r[a+1];if(!t||!e)throw new Error("Bucket index out of range for merging: ".concat(a," (allowed indexes are 0 - ").concat(r.length-2));var n=[...t,...e],f=r.slice();return f.splice(a,2,n),f},mr=(r,a)=>{var t=r[a];if(!t)throw new Error("Bucket index out of range for splitting: ".concat(a," (allowed indexes are 0 - ").concat(r.length-1));var e=t.length;if(e<2)return r;var n=Math.ceil(e/2),f=t.slice(0,n),v=t.slice(n),o=r.slice();return o.splice(a,1,f,v),o},Sr=r=>{for(var a=r.length,t=0,e=0,n=0;n<a;n++)t+=r[n][0],e+=r[n][1];t/=a,e/=a;for(var f=0,v=0,o=0;o<a;o++){var l=M(r[o],2),u=l[0],c=l[1];f+=(u-t)*(c-e),v+=(u-t)*(u-t)}var s=f/v,h=e-s*t;return[s,h]},yr=r=>{for(var a=Sr(r),t=M(a,2),e=t[0],n=t[1],f=0,v=0;v<r.length;v++){var o=r[v],l=o[1]-(e*o[0]+n);f+=l*l}return f},Dr=r=>{for(var a=[0],t=1;t<r.length-1;t++){var e=r[t-1],n=r[t],f=r[t+1],v=[e[e.length-1],...n,f[0]];a.push(yr(v))}return a.push(0),a},Pr=(r,a)=>{for(var t=Number.MAX_VALUE,e=void 0,n=1;n<r.length-2;n++)n===a||n+1===a||r[n]+r[n+1]<t&&(t=r[n]+r[n+1],e=n);return e},wr=(r,a)=>{for(var t=0,e=void 0,n=1;n<a.length-1;n++)r[n].length>1&&a[n]>t&&(t=a[n],e=n);return e},K=r=>{var a=O(r.x,r.y);return(t,e)=>{if(e<0)throw new Error("Supplied negative desiredLength parameter to LTD: ".concat(e));var n=t.length;if(n<=2||n<=e)return t;for(var f=a(t),v=R(f,e),o=n*10/e,l=0;l<o;l++){var u=Dr(v),c=wr(v,u);if(c===void 0)break;var s=Pr(u,c);if(s===void 0)break;v=mr(v,c),v=Ar(v,s>c?s+1:s)}for(var h=_(v),T=h.length,g=F(t,T),p=0;p<T;p++)g[p]=t[h[p]];return g}},tr=K(w()),Q=r=>{var a=O(r.x,r.y);return(t,e)=>{if(e<0)throw new Error("Supplied negative desiredLength parameter to LTOB: ".concat(e));var n=t.length;if(n<=1||n<=e)return t;var f=n/e,v=a(t),o=Math.max(2,e),l=F(t,o);l[0]=t[0],l[o-1]=t[n-1];for(var u=1;u<e-1;u++){for(var c=Math.floor(u*f),s=Math.min(n-1,(u+1)*f),h=-1,T=-1,g=c;g<s;g++){var p=v[g-1],b=v[g],G=v[g+1],y=E(p,b,G);y>h&&(h=y,T=g)}l[u]=t[T]}return l}},ar=Q(w()),br={ASAP:j,LTD:tr,LTOB:ar,LTTB:rr,SMA:Y,createASAP:W,createLTD:K,createLTOB:Q,createLTTB:J,createSMA:$};return L.ASAP=j,L.LTD=tr,L.LTOB=ar,L.LTTB=rr,L.SMA=Y,L.createASAP=W,L.createLTD=K,L.createLTOB=Q,L.createLTTB=J,L.createSMA=$,L.default=br,L}var or=vr();const x=(A,S)=>{A.sort((m,D)=>m[S]-D[S])},fr=(A,S,m)=>{let D=0,B=A.length-1,M=0,I=1/0;if(A.length===0)return-1;const E=A[D]?.[m]??-1/0,N=A[B]?.[m]??1/0;if(S<=E)return D;if(S>=N)return B;for(;D<=B;){const R=Math.floor((D+B)/2),i=A[R]?.[m]??0,X=Math.abs(i-S);if(X<I&&(I=X,M=R),i<S)D=R+1;else if(i>S)B=R-1;else return R}return M>0&&Math.abs((A[M-1]?.[m]??0)-S)<I&&(M=M-1,I=Math.abs((A[M]?.[m]??0)-S)),M<A.length-1&&Math.abs((A[M+1]?.[m]??0)-S)<I&&(M=M+1),M},lr=(A,S,m,D)=>{if(A.length<=D)return A;if(m)try{const B=A.map((E,N)=>({originalData:E,index:N,x:E[S],y:E[m]??0}));return or.LTTB(B,D).map(E=>E.originalData)}catch(B){console.error("LTTB Downsampling failed in worker:",B);const M=Math.ceil(A.length/D);return A.filter((I,E)=>E%M===0)}else{const B=Math.ceil(A.length/D);return A.filter((M,I)=>I%B===0)}};self.onmessage=A=>{if(A.data.type==="PROCESS_DATA"){const{activeRuns:S,xAxisKey:m,selectedMetricKeys:D,downsampleThreshold:B}=A.data.payload;try{if(S.length===0){self.postMessage({type:"DATA_READY",payload:{labels:[],datasets:{},fullDataForDetails:[]}});return}S.forEach(P=>{P.performanceLogs&&x(P.performanceLogs,m)});const M=S[0],I=S.slice(1),E=[];M.performanceLogs.forEach(P=>{const d={TIMESTAMP:P.TIMESTAMP,[m]:P[m]},O=M.id;d[`${O}:TIMESTAMP`]=P.TIMESTAMP,D.forEach(w=>{P[w]!==void 0&&(d[`${O}:${w}`]=P[w])}),P.BURST_LOGGING_STATUS!==void 0&&(d[`${O}:BURST_LOGGING_STATUS`]=P.BURST_LOGGING_STATUS);const q=P[m];isNaN(q)||(I.forEach(w=>{if(!w.performanceLogs||w.performanceLogs.length===0)return;const F=fr(w.performanceLogs,q,m);if(F!==-1){const U=w.performanceLogs[F],$=w.id;D.forEach(Y=>{U[Y]!==void 0&&(d[`${$}:${Y}`]=U[Y])}),U.BURST_LOGGING_STATUS!==void 0&&(d[`${$}:BURST_LOGGING_STATUS`]=U.BURST_LOGGING_STATUS),U.TIMESTAMP!==void 0&&(d[`${$}:TIMESTAMP`]=U.TIMESTAMP)}}),E.push(d))}),x(E,m);let N;D.length>0&&S.length>0&&(N=`${S[0].id}:${D[0]}`);const R=lr(E,m,N,B),i=R.map(P=>P[m]),X={};S.forEach(P=>{D.forEach(d=>{const O=`${P.id}:${d}`;X[O]=R.map(q=>{const w=q[O];return{x:q[m],y:typeof w=="number"?w:null}})})}),self.postMessage({type:"DATA_READY",payload:{labels:i,datasets:X,fullDataForDetails:E}})}catch(M){console.error("Error processing chart data in worker:",M),self.postMessage({type:"ERROR",payload:{message:M.message||"Unknown worker error"}})}}}})();

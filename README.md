# Luzera Benchmark Tool - Web Analyzer

This repository contains the web-based frontend for the Luzera Benchmark Tool. It's a React + Vite application built with TypeScript, designed to parse, visualize, and analyze performance benchmark `.csv` files generated by the corresponding [Luzera Unreal Engine plugin](https://www.fab.com/listings/d47a3402-c978-4b25-9e9d-7fc7f63e6c2f).

The analyzer allows developers and QA teams to upload benchmark session folders, compare multiple runs, and interactively inspect performance data to identify bottlenecks.

## Features

* 📈 **Interactive Performance Charts:** Visualize any number of metrics (FPS, CPU, GPU, memory, etc.) over time or spline distance.
* 🔄 **Multi-Session Comparison:** Load and overlay multiple benchmark runs in a single, unified chart view to easily compare performance changes between builds or settings.
* 🗺️ **Dynamic Filtering:** Filter data by map and dynamically select which metrics to display on the chart.
* 💻 **System Info Display:** View the static hardware, driver, and project settings from `StaticData.csv` for each benchmark session.
* 🖱️ **Click-to-Inspect:** Click any point on the chart to open a modal with a detailed comparison of all metric values for that specific moment.
* 📋 **Data Extraction:** Copy the data from the current chart's zoom range and filters directly to your clipboard as CSV.
* ⚡ **Fast & Responsive:** Uses Web Workers for all heavy lifting (CSV parsing and chart data processing), ensuring the UI remains fast and responsive even with large datasets.


## Tech Stack

* **Framework:** React
* **Language:** TypeScript
* **Bundler:** Vite
* **Styling:** Tailwind CSS
* **UI Components:** `shadcn/ui`
* **Charting:** Chart.js with `react-chartjs-2`
* **CSV Parsing:** Papaparse
* **Async:** Web Workers


## Getting Started

### Prerequisites

* Node.js (v18+ recommended)
* `npm`, `yarn`, or `pnpm`

### Installation & Running Locally

1.  **Clone the repository:**
    ```bash
    git clone [https://github.com/LuzeraStudio/LuzeraBenchmarkTool.git](https://github.com/LuzeraStudio/LuzeraBenchmarkTool.git)
    cd /LuzeraBenchmarkTool
    ```

2.  **Install dependencies:**
    ```bash
    npm install
    # or
    yarn install
    # or
    pnpm install
    ```

3.  **Run the development server:**
    ```bash
    npm run dev
    ```

4.  Open your browser and navigate to `http://localhost:5173` (or the port specified in your terminal).


## Expected Data Format

This tool is designed to parse a specific folder structure. To upload data, you must select the **parent folder** that contains one or more of the following CSV files:

```
benchmark-session/
├── StaticData.csv
├── MyMap_01-PerformanceLog.csv
├── MyMap_01-Events.csv
├── MyMap_02-PerformanceLog.csv
└── MyMap_02-Events.csv
```

* `StaticData.csv`: Contains information that doesn't change during the benchmark session, like hardware, drivers, and project settings.
* `[MapName]-PerformanceLog.csv`: The main log file containing all performance metrics (e.g., `FPS.CURRENT`, `SPLINE.DISTANCE`, `GPU.USAGE`).
* `[MapName]-Events.csv`: Contains custom timestamped events that will be overlaid on the chart as annotations.

You can upload multiple session folders by selecting them all in the file-picker or dragging them into the upload zone.

## Project Structure

A high-level overview of the `src` directory:

```
src/
├── components/
│   ├── ui/             # Auto-generated shadcn/ui components
│   ├── ChartController.tsx # Main component: orchestrates all chart controls and hooks
│   ├── ChartJsChart.tsx  # The core <Line> chart component
│   ├── FileUploader.tsx  # Drag-and-drop file uploader
│   ├── PointDetailsDialog.tsx # Modal for inspecting chart data points
│   └── SystemInfo.tsx    # Renders the static data table
│
├── contexts/
│   ├── BenchmarkContext.tsx      # Manages benchmark sessions and the parser worker
│   ├── ChartSettingsContext.tsx # Global state for chart settings (map, metrics, etc.)
│   └── ThemeContext.tsx          # Manages light/dark/system theme
│
├── hooks/
│   ├── useBenchmarkSelection.ts  # Logic for selecting/deriving sessions, metrics, runs
│   ├── useChartDataManager.ts    # Manages the chart.worker.ts and annotations
│   ├── useChartDataExtractor.ts  # Logic for copying chart data to clipboard
│   ├── useChartLegendManager.ts  # State management for the legend visibility
│   ├── useChartPresetManager.ts  # Manages user-saved presets and color overrides
│   ├── useChartJsOptions.ts      # Generates the Chart.js options object
│   ├── useChartJsTooltip.ts      # Manages the custom HTML tooltip for Chart.js
│   ├── usePointDetailsManager.ts # Logic for the "click to inspect" modal
│   └── useChartAxisMax.ts        # Calculates dynamic Y-axis max values
│
├── lib/
│   ├── chartjs-config.ts         # Chart.js plugin registration
│   ├── colorUtils.ts             # Helper to read CSS theme colors
│   └── utils.ts                  # General utilities (cn, binary search)
│
├── pages/
│   ├── Home.tsx                  # Main analysis page
│   ├── Documentation.tsx         # Built-in documentation page
│   └── NotFound.tsx              # 404 page
│
├── types/
│   └── benchmark.ts              # Core TypeScript types for all data
│
└── workers/
    ├── parser.worker.ts          # Parses CSV files into benchmark sessions
    └── chart.worker.ts           # Processes data for Chart.js (merging, downsampling)
```
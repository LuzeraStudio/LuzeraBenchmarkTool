# Luzera Benchmark Tool - Web Analyzer

This repository contains the web-based frontend for the Luzera Benchmark Tool. It's a React + Vite application built with TypeScript, designed to parse, visualize, and analyze performance benchmark `.csv` files generated by the corresponding [Luzera Unreal Engine plugin](https://www.fab.com/listings/d47a3402-c978-4b25-9e9d-7fc7f63e6c2f).

The analyzer allows developers and QA teams to upload benchmark session folders, compare multiple runs, and interactively inspect performance data to identify bottlenecks.

## Features

* ğŸ“ˆ **Interactive Performance Charts:** Visualize any number of metrics (FPS, CPU, GPU, memory, etc.) over time or spline distance.
* ğŸ”„ **Multi-Session Comparison:** Load and overlay multiple benchmark runs in a single, unified chart view to easily compare performance changes between builds or settings.
* ğŸ—ºï¸ **Dynamic Filtering:** Filter data by map and dynamically select which metrics to display on the chart.
* ğŸ’» **System Info Display:** View the static hardware, driver, and project settings from `StaticData.csv` for each benchmark session.
* ğŸ–±ï¸ **Click-to-Inspect:** Click any point on the chart to open a modal with a detailed comparison of all metric values for that specific moment.
* ğŸ“‹ **Data Extraction:** Copy the data from the current chart's zoom range and filters directly to your clipboard as CSV.
* âš¡ **Fast & Responsive:** Uses Web Workers for all heavy lifting (CSV parsing and chart data processing), ensuring the UI remains fast and responsive even with large datasets.


## Tech Stack

* **Framework:** React
* **Language:** TypeScript
* **Bundler:** Vite
* **Styling:** Tailwind CSS
* **UI Components:** `shadcn/ui`
* **Charting:** Chart.js with `react-chartjs-2`
* **CSV Parsing:** Papaparse
* **Async:** Web Workers


## Getting Started

### Prerequisites

* Node.js (v18+ recommended)
* `npm`, `yarn`, or `pnpm`

### Installation & Running Locally

1.  **Clone the repository:**
    ```bash
    git clone [https://github.com/LuzeraStudio/LuzeraBenchmarkTool.git](https://github.com/LuzeraStudio/LuzeraBenchmarkTool.git)
    cd /LuzeraBenchmarkTool
    ```

2.  **Install dependencies:**
    ```bash
    npm install
    # or
    yarn install
    # or
    pnpm install
    ```

3.  **Run the development server:**
    ```bash
    npm run dev
    ```

4.  Open your browser and navigate to `http://localhost:5173` (or the port specified in your terminal).


## Expected Data Format

This tool is designed to parse a specific folder structure. To upload data, you must select the **parent folder** that contains one or more of the following CSV files:

```
benchmark-session/
â”œâ”€â”€ StaticData.csv
â”œâ”€â”€ MyMap_01-PerformanceLog.csv
â”œâ”€â”€ MyMap_01-Events.csv
â”œâ”€â”€ MyMap_02-PerformanceLog.csv
â””â”€â”€ MyMap_02-Events.csv
```

* `StaticData.csv`: Contains information that doesn't change during the benchmark session, like hardware, drivers, and project settings.
* `[MapName]-PerformanceLog.csv`: The main log file containing all performance metrics (e.g., `FPS.CURRENT`, `SPLINE.DISTANCE`, `GPU.USAGE`).
* `[MapName]-Events.csv`: Contains custom timestamped events that will be overlaid on the chart as annotations.

You can upload multiple session folders by selecting them all in the file-picker or dragging them into the upload zone.

## Project Structure

A high-level overview of the `src` directory:

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/             # Auto-generated shadcn/ui components
â”‚   â”œâ”€â”€ ChartController.tsx # Main component: orchestrates all chart controls and hooks
â”‚   â”œâ”€â”€ ChartJsChart.tsx  # The core <Line> chart component
â”‚   â”œâ”€â”€ FileUploader.tsx  # Drag-and-drop file uploader
â”‚   â”œâ”€â”€ PointDetailsDialog.tsx # Modal for inspecting chart data points
â”‚   â””â”€â”€ SystemInfo.tsx    # Renders the static data table
â”‚
â”œâ”€â”€ contexts/
â”‚   â”œâ”€â”€ BenchmarkContext.tsx      # Manages benchmark sessions and the parser worker
â”‚   â”œâ”€â”€ ChartSettingsContext.tsx # Global state for chart settings (map, metrics, etc.)
â”‚   â””â”€â”€ ThemeContext.tsx          # Manages light/dark/system theme
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useBenchmarkSelection.ts  # Logic for selecting/deriving sessions, metrics, runs
â”‚   â”œâ”€â”€ useChartDataManager.ts    # Manages the chart.worker.ts and annotations
â”‚   â”œâ”€â”€ useChartDataExtractor.ts  # Logic for copying chart data to clipboard
â”‚   â”œâ”€â”€ useChartLegendManager.ts  # State management for the legend visibility
â”‚   â”œâ”€â”€ useChartPresetManager.ts  # Manages user-saved presets and color overrides
â”‚   â”œâ”€â”€ useChartJsOptions.ts      # Generates the Chart.js options object
â”‚   â”œâ”€â”€ useChartJsTooltip.ts      # Manages the custom HTML tooltip for Chart.js
â”‚   â”œâ”€â”€ usePointDetailsManager.ts # Logic for the "click to inspect" modal
â”‚   â””â”€â”€ useChartAxisMax.ts        # Calculates dynamic Y-axis max values
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ chartjs-config.ts         # Chart.js plugin registration
â”‚   â”œâ”€â”€ colorUtils.ts             # Helper to read CSS theme colors
â”‚   â””â”€â”€ utils.ts                  # General utilities (cn, binary search)
â”‚
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ Home.tsx                  # Main analysis page
â”‚   â”œâ”€â”€ Documentation.tsx         # Built-in documentation page
â”‚   â””â”€â”€ NotFound.tsx              # 404 page
â”‚
â”œâ”€â”€ types/
â”‚   â””â”€â”€ benchmark.ts              # Core TypeScript types for all data
â”‚
â””â”€â”€ workers/
    â”œâ”€â”€ parser.worker.ts          # Parses CSV files into benchmark sessions
    â””â”€â”€ chart.worker.ts           # Processes data for Chart.js (merging, downsampling)
```